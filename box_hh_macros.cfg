##########################
#  box_extras.py Macros  #
##########################

[gcode_macro BOX_HOME_XY]
description: Home X or Y axes if they are not already homed.  Z axis is ignored
gcode:
    {% if "x" not in printer.toolhead.homed_axes %}
        {% if "y" not in printer.toolhead.homed_axes %}
            G28 Y X         # Home X and Y Axes
        {% else %}
            G28 X           # Home X Only
        {% endif %}
    {% else %}
        {% if "y" not in printer.toolhead.homed_axes %}
            G28 Y           # Home Y Only
        {% endif %}
    {% endif %}

[gcode_macro BOX_CLEAR_FLUSH]
description: Move to the chute and perform a rapid series of movements to clear any nozzle flush
gcode:
    BOX_HOME_XY
    M204 S10000
    G1 Y308 F10000
    G1 X80 F12000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y324 F1200
    G1 X95 F6000
    G1 Y308 F10000
    G1 X80 F12000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y324 F1200
    G1 X95 F12000
    G1 Y308 F10000
    G1 X80 F12000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y316 F10000
    G1 Y314 F1500
    G1 Y324 F1200
    G1 X95 F6000

[gcode_macro BOX_CLEAR_OOZE]
description: Move to the chute and perform a rapid series of movements to clear any nozzle ooze
gcode:
    BOX_HOME_XY
    M204 S10000
    G1 X75 F12000
    G1 X58 Y318 F12000
    G1 X75 F120000
    G1 X58 Y324 F9000
    G1 Y318 F12000
    G1 X75 Y324 F9000
    G1 X95 F12000

[gcode_macro BOX_CLEAN_NOZZLE]
description: Perform full nozzle clean by flushing and wiping 
gcode:
    BOX_CLEAR_FLUSH
    BOX_CLEAR_OOZE
